var ww=function(e){"use strict";const t="undefined"!=typeof window?window:void 0,n="undefined"!=typeof document?document:void 0,r="undefined"!=typeof navigator?navigator:void 0,o="undefined"!=typeof location?location:void 0;function i(){return o?.href||""}function a(){return n?.title||""}const c=r?.userAgent||"",s=r?.platform||"",u=c?.match(/wxwork\/([\d.]+)/i)?.[1],d=!!u,p=!d&&/micromessenger/i.test(c),l=/\bAndroid\b/i.test(c),f=/Win/i.test(s),{isIOS:h,isMac:g}=function(){const e=r?.maxTouchPoints??1,t=/Mac/i.test(s);if(t&&e>2)return{isMac:!1,isIOS:!0};return{isMac:t,isIOS:/\b(iPhone|iPad|iPod)\b/i.test(c)}}();let y,m,w;function C(){return y}function v(){return m?.getResult()?.params}function S(){return w?.getResult()?.params}function k(){const e=C();if(d&&e?.getAgentConfigSignature){const e=S();return e?.corpid}const t=v();return t?.appId}function x(){const e=function(){const e=C();return d&&e?.getAgentConfigSignature?S():v()}();if(!e)return;const t=k();return{appId:t,verifyAppId:t,verifySignType:"sha1",verifyTimestamp:e.timestamp,verifyNonceStr:e.nonceStr,verifySignature:e.signature}}const I={config:"preVerifyJsApi",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareWechat:"menu:share:wechat",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress",getBrandWCPayRequest:"getBrandWCPayRequest"},T={};for(const At of Object.keys(I))T[I[At]]=At;function W(e){return I[e]||e}function A(e){return T[e]||e}function P(e){return e.map(W)}const _=i();function L(e){if("undefined"!=typeof Buffer)return Buffer.from(e).toString("base64");let t="";const n=new Uint8Array(e),r=n.byteLength;for(let o=0;o<r;o++)t+=String.fromCharCode(n[o]);return btoa(t)}function M(e){if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").buffer;const t=atob(e),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}function B(e,t,n){if(R(e))try{return e.call(n,t)}catch(r){!function(...e){console.error("[wwsdk]",...e)}(r)}}function D(e,t){return e.slice(0,t.length)===t}function E(e){return e?_.split("#")[0]:i().split("#")[0]}function b(e){return V(e)?e.slice(e.indexOf(":")+1):""}function O(e){return!1===e||0===e}function R(e){return"function"==typeof e}function V(e){return"string"==typeof e}function N(e){return e?V(e)?e:e.join(";"):e}async function U(n,r){e.isWeixinJSBridgeReady||await e.onWeixinJSBridgeReady,t.WeixinJSBridge.on(n,r)}async function j(n,r={},o){e.isWeixinJSBridgeReady||await e.onWeixinJSBridgeReady;const i=await new Promise((e=>{const o={...r,...x()};t.WeixinJSBridge.invoke(n,o,e)}));i.errMsg||(i.errMsg=function(e,t){const n=A(e);if(!t)return`${n}:ok`;let r=b(t);"confirm"===r&&(r="ok");"failed"===r&&(r="fail");D(r,"failed_")&&(r=r.slice(7));D(r,"fail_")&&(r=r.slice(5));r=r.replace(/_/g,"").toLowerCase(),("access denied"===r||"no permission to execute"===r)&&(r="permission denied");"config"===n&&"function not exist"===r&&(r="ok");r||(r="fail");return`${n}:${r}`}(n,i.err_msg||i.errmsg));const a=b(i.errMsg);if(null==i.errCode&&(i.errCode=null!=i.err_code?i.err_code:"ok"===a?0:-1),B(o,i),"ok"!==a&&"yes"!==a)throw i;return i}e.isWeixinJSBridgeReady=!!t?.WeixinJSBridge,e.onWeixinJSBridgeReady=Promise.resolve(),e.isWeixinJSBridgeReady||(e.onWeixinJSBridgeReady=new Promise((t=>{n?.addEventListener("WeixinJSBridgeReady",(()=>{e.isWeixinJSBridgeReady=!0,t()}))})));class q extends Error{constructor(e){super(`SDK Error: ${e}`)}}class J extends q{constructor(){super("Aborted")}}const F=1,$=2;class G{checkValid(){return d&&this.url!==E(this.useOriginalURL)&&(this.error=new J),!this.error}getResult(){if(this.checkValid())return this.result}async awaitPromise(e){try{return this.result=await e,this.result}catch(t){throw this.error=t,t}}constructor(e,t){this.type=e,this.useOriginalURL=p&&!f&&!g&&e===F,this.url=E(this.useOriginalURL),this.promise=this.awaitPromise(t(this.url))}}async function z(){const e=m;if(e?.checkValid())return e.promise;const t=new G(F,(async e=>{const n=C();if(!n?.getConfigSignature)throw new q("Missing getConfigSignature");const r=await n.getConfigSignature(e);if(!t.checkValid())throw new J;const o=function(e,t){return{appId:e.corpId,timestamp:`${t.timestamp}`,nonceStr:t.nonceStr,signature:t.signature,jsApiList:P(e.jsApiList||["config"]),openTagList:P(e.openTagList||[])}}(n,r),i=await j("preVerifyJSAPI",{appId:o.appId,verifyJsApiList:o.jsApiList,verifyOpenTagList:o.openTagList,verifyAppId:o.appId,verifySignType:"sha1",verifyTimestamp:o.timestamp,verifyNonceStr:o.nonceStr,verifySignature:o.signature});if(!t.checkValid())throw new J;return{params:o,result:i}}));return t.promise.then((e=>{const t=C();B(t?.onConfigSuccess,e.result),B(t?.onConfigComplete,e.result)}),(e=>{const t=C();B(t?.onConfigFail,e),B(t?.onConfigComplete,e)})),function(e){m=e}(t),t.promise}async function Q(){const e=w;if(e?.checkValid())return e.promise;const t=new G($,(async e=>{let n;d&&function(e,t){const n=e?.split(".")||[],r=t?.split(".")||[];for(let o=0,i=Math.max(n.length,r.length);o<i;o++){const e=parseInt(n[o])||0,t=parseInt(r[o])||0;if(e>t)return 1;if(e<t)return-1}return 0}(u,"3.0.24")<0&&(n=z());const[r]=await Promise.all([H(e),n]);if(!t.checkValid())throw new J;const o=await j("agentConfig",r);if(!t.checkValid())throw new J;return{params:r,result:o}}));return t.promise.then((e=>{const t=C();B(t?.onAgentConfigSuccess,e.result),B(t?.onAgentConfigComplete,e.result)}),(e=>{const t=C();B(t?.onAgentConfigFail,e),B(t?.onAgentConfigComplete,e)})),function(e){w=e}(t),t.promise}async function H(e){const t=C();if(!t?.getAgentConfigSignature)throw new q("Missing getAgentConfigSignature");const n=await t.getAgentConfigSignature(e);return{corpid:t.corpId,agentid:`${t.agentId}`,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:P(t.jsApiList||["agentConfig"])}}function K(){const e=C();return d&&e?.getAgentConfigSignature?Q():z()}function Z(){if(C())return K()}async function X(e,t,n=t){return ee(t,(async()=>(await Z(),j(e,n))))}async function Y(e,t,n){await Z(),U(e,(()=>{ee(t,n)}))}function ee(e,t){return t(e).then((t=>(B(e?.success,t),B(e?.complete,t),t)),(t=>{throw B("cancel"===b(t.errMsg)?e?.cancel:e?.fail,t),B(e?.complete,t),t}))}var te,ne,re,oe,ie,ae,ce,se,ue,de,pe,le,fe,he,ge,ye,me,we,Ce,ve,Se,ke,xe;function Ie(e){return{timeStamp:`${e.timestamp}`,nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function Te(e){const t={};for(const r of Object.keys(e)){if(!(n=e[r])||"object"!=typeof n){t[r]=e[r];continue}const o=Te(e[r]);for(const e of Object.keys(o))t[`${r}.${e}`]=o[e]}var n;return t}function We(e){if(!e||!V(e))return;const[t,...n]=e.split("?");return n.length?`${t}.html?${n.join("?")}`:`${t}.html`}function Ae(e={}){return ee(e,(async()=>{if(!d)return async function(){if(!t?.WWOpenData?.agentConfig)throw new q("Missing WWOpenData.agentConfig");const e=await H(E());return new Promise(((n,r)=>{t.WWOpenData.agentConfig({...e,success:n,fail:r})}))}();const{result:e}=await Q();if(!f&&!t?.WeixinSandBox)throw new q("Missing WeixinSandBox");if(t?.WWOpenData||await j("wwapp.initWwOpenData"),!t?.WWOpenData)throw new q("Init WWOpenData failed");return t.WWOpenData.initJSSDK&&t.WWOpenData.initJSSDK({invoke:j,ensureAgentConfigReady:Q}),e}))}function Pe(e){const t=document.createElement("iframe"),{style:n}=t;n.display="block",n.border="none",n.background="transparent",t.referrerPolicy="origin",t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true");const r=function(e){if("string"==typeof e)return document.querySelector(e);return e}(e);return r&&r.appendChild(t),t}function _e(e){return e&&"object"==typeof e?{...e,message:e.message,stack:e.stack}:e}function Le(e,t){const n=new Map;return{invoke:function(t){return new Promise(((r,o)=>{const i=function(){const e=Math.random().toString(36).slice(2);return`${Date.now().toString(36)}.${e}`}();n.set(i,{resolve:r,reject:o}),e({type:"ww-iframe-handle:call",uid:i,args:t})}))},handleCallMessage:async function(n){try{e({type:"ww-iframe-handle:response",uid:n.uid,kind:"resolve",args:await t(n.args)})}catch(r){throw e({type:"ww-iframe-handle:response",uid:n.uid,kind:"reject",args:_e(r)}),r}},handleResponseMessage:function(e){const t=n.get(e.uid);t&&(t[e.kind](e.args),n.delete(e.uid))}}}e.Proximity=void 0,(te=e.Proximity||(e.Proximity={})).CLProximityUnknown="0",te.CLProximityImmediate="1",te.CLProximityNear="2",te.CLProximityFar="3",e.LocationType=void 0,(ne=e.LocationType||(e.LocationType={})).wgs84="wgs84",ne.gcj02="gcj02",e.NetworkType=void 0,(re=e.NetworkType||(e.NetworkType={})).wifi="wifi",re.network2g="2g",re.network3g="3g",re.network4g="4g",re.none="none",re.unknown="unknown",e.SizeType=void 0,(oe=e.SizeType||(e.SizeType={})).original="original",oe.compressed="compressed",e.SourceType=void 0,(ie=e.SourceType||(e.SourceType={})).album="album",ie.camera="camera",e.CameraMode=void 0,(ae=e.CameraMode||(e.CameraMode={})).normal="normal",ae.batch="batch",ae.front="front",ae.batch_front="batch_front",e.LiveType=void 0,(ce=e.LiveType||(e.LiveType={}))[ce.common=0]="common",ce[ce.corp_training=1]="corp_training",ce[ce.edu_normal_class=2]="edu_normal_class",ce[ce.edu_small_class=3]="edu_small_class",e.ProductViewType=void 0,(se=e.ProductViewType||(e.ProductViewType={}))[se.normal=0]="normal",se[se.scan=1]="scan",e.CreateExternalPaymentType=void 0,(ue=e.CreateExternalPaymentType||(e.CreateExternalPaymentType={}))[ue.chat=0]="chat",ue[ue.qrcode=1]="qrcode",e.EntryType=void 0,(de=e.EntryType||(e.EntryType={})).contact_profile="contact_profile",de.single_chat_tools="single_chat_tools",de.group_chat_tools="group_chat_tools",de.chat_attachment="chat_attachment",de.single_kf_tools="single_kf_tools",de.chain_single_chat_tools="chain_single_chat_tools",de.chain_group_chat_tools="chain_group_chat_tools",de.normal="normal",e.EnvVersion=void 0,(pe=e.EnvVersion||(e.EnvVersion={})).release="release",pe.trial="trial",pe.develop="develop",e.OpenUserProfileType=void 0,(le=e.OpenUserProfileType||(e.OpenUserProfileType={}))[le.internal=1]="internal",le[le.external=2]="external",e.PrintFileIdType=void 0,(fe=e.PrintFileIdType||(e.PrintFileIdType={}))[fe.mediaid=1]="mediaid",fe[fe.url=2]="url",fe[fe.localId=4]="localId",e.InTalkType=void 0,(he=e.InTalkType||(e.InTalkType={})).None="None",he.HWOpenTalk="HWOpenTalk",he.VoIP="VoIP",he.SystemCall="SystemCall",e.ScanQRCodeType=void 0,(ge=e.ScanQRCodeType||(e.ScanQRCodeType={})).qrCode="qrCode",ge.barCode="barCode",e.InputCorpGroupContactMode=void 0,(ye=e.InputCorpGroupContactMode||(e.InputCorpGroupContactMode={})).single="single",ye.multi="multi",e.InputCorpGroupContactType=void 0,(me=e.InputCorpGroupContactType||(e.InputCorpGroupContactType={})).department="department",me.user="user",e.SelectEnterpriseContactMode=void 0,(we=e.SelectEnterpriseContactMode||(e.SelectEnterpriseContactMode={})).single="single",we.multi="multi",e.SelectEnterpriseContactType=void 0,(Ce=e.SelectEnterpriseContactType||(e.SelectEnterpriseContactType={})).department="department",Ce.user="user",e.SelectExternalContactType=void 0,(ve=e.SelectExternalContactType||(e.SelectExternalContactType={}))[ve.all=0]="all",ve[ve.unselected=1]="unselected",e.SelectPrivilegedContactMode=void 0,(Se=e.SelectPrivilegedContactMode||(e.SelectPrivilegedContactMode={})).single="single",Se.multi="multi",e.OAType=void 0,(ke=e.OAType||(e.OAType={})).create_approval="10001",ke.view_approval="10002",e.OaExtDataType=void 0,(xe=e.OaExtDataType||(e.OaExtDataType={})).link="link",xe.text="text";let Me=!1;const Be=[];function De(e){try{const t=JSON.parse(e.data);if(!t.type.startsWith("ww-iframe-handle:"))return;for(const n of Be.slice())n(t,e)}catch(t){}}function Ee(e,t,n){const{invoke:r,handleCallMessage:o,handleResponseMessage:i}=Le((function(e){const t=JSON.stringify(e);c?d(t):a.push(t)}),n),a=[];let c=!1;const s=(u=(n,r)=>{if(r.origin===t&&e.contentWindow===r.source)switch(n.type){case"ww-iframe-handle:ready":return function(){if(!c){c=!0;for(const e of a)d(e)}}();case"ww-iframe-handle:call":return o(n);case"ww-iframe-handle:response":return i(n)}},Me||(Me=!0,window.addEventListener("message",De)),Be.push(u),()=>{const e=Be.indexOf(u);e>=0&&Be.splice(e,1)});var u;function d(n){!function(e,t,n){const r="string"==typeof t?t:JSON.stringify(t);e?.postMessage(r,n)}(e.contentWindow,n,t)}return e.addEventListener("load",(function(){c||d({type:"ww-iframe-handle:init"})})),{el:e,invoke:r,dispose:s}}function be(e,t,n){B(t[e.name],e.payload||e.data,n)}let Oe;function Re(e,t){Oe?.();const n=Pe(document.body),{style:r}=n;r.position="fixed",r.left="0",r.top="0",r.zIndex="1000",r.width="100vw",r.height="100vh",n.classList.add("wecom-jssdk-modal"),n.setAttribute("src",e);const{origin:o}=new URL(e),i=Ee(n,o,(e=>("close"===e.type&&a(),t?.(e))));function a(){i.dispose(),n.parentNode?.removeChild(n)}return Oe=a,i}const Ve={agentConfig:H,suiteConfig:async function(e){const t=C();if(!t?.getSuiteConfigSignature)throw new q("Missing getSuiteConfigSignature");const n=await t.getSuiteConfigSignature(e);return{suiteid:t.suiteId,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:P(t.jsApiList||["agentConfig"])}}};async function Ne(e,t){let n=new Error("Missing signature handler");for(const o of t)try{if(!Object.prototype.hasOwnProperty.call(Ve,o))continue;return{type:o,params:await Ve[o](e)}}catch(r){n=r}throw n}function Ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function je(e,t){return!!e&&e.indexOf(t)>=0}var qe=Fe("Identifier","name"),Je=Fe("Literal","value");function Fe(e,t){return function(n){var r;return(r={type:e})[t]=n,r}}function $e(e){return ze(e,65,90)||ze(e,97,122)||36===e||95===e}function Ge(e){return ze(e,48,57)}function ze(e,t,n){return e>=t&&e<=n}for(var Qe={null:null,true:!0,false:!1,NaN:NaN,Infinity:1/0},He="await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),Ke={},Ze=0,Xe=He;Ze<Xe.length;Ze++){Ke[Xe[Ze]]=!0}function Ye(e){$e(e.peek())||e.unexpected();var t,n=e.index;do{e.next()}while($e(t=e.peek())||Ge(t));return e.expr.slice(n,e.index)}var et={n:"\n",r:"\r",t:"\t"};function tt(e){var t=e.peek();return Ge(t)||46===t?function(e){for(var t,n="";Ge(e.peek());)n+=e.nextCh();if("0"===n){if(e.eat(120)||e.eat(88)){for(n="";Ge(t=e.peek())||ze(t,65,70)||ze(t,97,102);)n+=e.nextCh();return n||e.unexpected(),e.build(Je(parseInt(n,16)))}if(e.eat(98)||e.eat(66)){for(n="";48===e.peek()||49===e.peek();)n+=e.nextCh();return n||e.unexpected(),e.build(Je(parseInt(n,2)))}}if(46===e.peek())for(n+=e.nextCh();Ge(e.peek());)n+=e.nextCh();if(101===e.peek()||69===e.peek()){n+=e.nextCh(),43!==e.peek()&&45!==e.peek()||(n+=e.nextCh());for(var r=!1;Ge(e.peek());)r=!0,n+=e.nextCh();r||e.unexpected()}return $e(e.peek())&&e.throw("Variable name cannot start with a number (".concat(n).concat(e.peekCh(),").")),46!==e.peek()&&"."!==n||e.unexpected(),e.build(Je(parseFloat(n)))}(e):39===t||34===t?function(e){for(var t,n=e.nextCh(),r="";t=e.nextCh();){if(t===n)return e.build(Je(r));"\\"===t?(t=e.nextCh(),Ue(et,t)?r+=et[t]:r+=t):r+=t}e.unexpected()}(e):$e(t)?function(e){var t=Ye(e);return Ue(Qe,t)?e.build(Je(Qe[t])):(Ue(Ke,t)&&e.unexpected(t),e.build(qe(t)))}(e):void e.unexpected()}function nt(e,t,n){var r;return void 0===n&&(n=!1),n?(e.expect(91),r=rt(e),e.expect(93)):r=function(e){var t=Ye(e);return e.build(qe(t))}(e),e.build({type:"MemberExpression",object:t,property:r,computed:n})}function rt(e){return function(e){for(var t,n=tt(e);t=e.peek();)if(91!==t){if(!e.eat(46))break;n=nt(e,n)}else n=nt(e,n,!0);return n}(e)}function ot(e){var t,n={expr:t=e.trim(),index:0,peek:function(){return this.expr.charCodeAt(this.index)},peekCh:function(){return this.expr.charAt(this.index)},next:function(){this.index+=1},nextCh:function(){return this.index+=1,this.expr.charAt(this.index-1)},eat:function(e){return this.peek()===e&&(this.next(),this.skipWhitespace(),!0)},expect:function(e){this.eat(e)||this.unexpected()},skip:function(e){this.index+=e,this.skipWhitespace()},skipWhitespace:function(){for(var e=t.charCodeAt(this.index);32===e||9===e||13===e||10===e;)this.index+=1,e=t.charCodeAt(this.index);return this.index},build:function(e){return this.skipWhitespace(),e},unexpected:function(e){if(!e&&this.index>=t.length)throw this.throw("Unexpected end of input.");throw this.throw("Unexpected token '".concat(e||this.peekCh(),"'."))},throw:function(e){throw new SyntaxError("".concat(e," (1:").concat(this.index,")"))}},r=rt(n);return n.index!==n.expr.length&&n.unexpected(),r}var it=["constrcutor","prototype","__proto__"];function at(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),"Identifier"===e.type)return n.unshift(e.name),n;if("MemberExpression"===e.type){var r=e.object,o=e.property;if(e.computed){if("Literal"!==o.type)return;var i=o.value;if(je(t,i))return;n.unshift(i)}else{if("Identifier"!==o.type)return;var a=o.name;if(je(t,a))return;n.unshift(a)}return at(r,t,n)}}function ct(e,t,n,r){for(var o,i=e,a=0,c=t.length-1;a<c;a++){var s=t[a];Ue(i,s)&&("object"==typeof(o=i[s])&&null!==o)||r(i,s,"string"==typeof t[a+1]?{}:[]),i=i[s]}return r(i,t[t.length-1],n),i}function st(e,t,n){e[t]=n}function ut(e){if(Array.isArray(e))return e.map(ut);if(null==e||"object"!=typeof e)return e;const t={};for(const n of Object.keys(e))t[n]=ut(e[n]);return t}function dt(e){const t=new Map,n=new Map;return{get:async function(r){const o=await e({type:"refGet",name:r});if(!o)return;const i=t.get(o.refId)?.deref();if(i)return i;const a=function(t){const r=[];function o(n,r){return e({type:"refCall",refId:t,name:n,data:r})}function i(e){return n.has(t)||n.set(t,r),r.push(e),()=>{const o=r.indexOf(e);o<0||(r.splice(o,1),r.length||n.delete(t))}}return{invoke:o,subscribe:i}}(o.refId);var c;return t.set(o.refId,(c=a,"undefined"!=typeof WeakRef?new WeakRef(c):{deref:()=>c})),a},handleEvent:function(e,t){const r=n.get(e);if(r)for(const n of r)n(t)}}}const pt="https://open.work.weixin.qq.com",lt=`${pt}/wwopen/ww-open-data-frame`,ft=["constructor","prototype","__proto__","__ob__"];function ht(e){return Object.keys(e).filter((t=>"function"==typeof e[t]))}const gt="2.0.2";var yt,mt,wt,Ct;e.WWLoginType=void 0,(yt=e.WWLoginType||(e.WWLoginType={})).serviceApp="ServiceApp",yt.corpApp="CorpApp",e.WWLoginLangType=void 0,(mt=e.WWLoginLangType||(e.WWLoginLangType={})).zh="zh",mt.en="en",e.WWLoginRedirectType=void 0,(wt=e.WWLoginRedirectType||(e.WWLoginRedirectType={})).top="top",wt.callback="callback",wt.self="self",e.WWLoginPanelSizeType=void 0,(Ct=e.WWLoginPanelSizeType||(e.WWLoginPanelSizeType={})).middle="middle",Ct.small="small";const vt={[e.WWLoginPanelSizeType.middle]:["480px","416px"],[e.WWLoginPanelSizeType.small]:["320px","380px"]};function St(e){return function(e){const t="0123456789abcdef";let n,r="";for(let o=0;o<e.length;o++)n=e.charCodeAt(o),r+=t.charAt(n>>>4&15)+t.charAt(15&n);return r}(function(e){return function(e){let t="";for(let n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;const n=new Array(80);let r=1732584193,o=-271733879,i=-1732584194,a=271733878,c=-1009589776;for(let s=0;s<e.length;s+=16){const t=r,u=o,d=i,p=a,l=c;for(let f=0;f<80;f++){n[f]=f<16?e[s+f]:Tt(n[f-3]^n[f-8]^n[f-14]^n[f-16],1);const t=It(It(Tt(r,5),kt(f,o,i,a)),It(It(c,n[f]),xt(f)));c=a,a=i,i=Tt(o,30),o=r,r=t}r=It(r,t),o=It(o,u),i=It(i,d),a=It(a,p),c=It(c,l)}return[r,o,i,a,c]}(function(e){const t=new Array(e.length>>2);for(let n=0;n<t.length;n++)t[n]=0;for(let n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}(e))}function kt(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function xt(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function It(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Tt(e,t){return e<<t|e>>>32-t}const Wt={isWeChat:p,isWeCom:d};return e.IS_WECOM_SDK=!0,e.SDK_VERSION=gt,e.addCard=function(e){return ee(e,(async()=>{await Z();const t=await j("batchAddCard",{card_list:e.cardList.map((e=>({card_id:e.cardId,card_ext:e.cardExt})))});if(!t.card_list)return t;for(const e of t.card_list)e.cardId=e.card_id,delete e.card_id,e.cardExt=e.card_ext,delete e.card_ext,e.isSuccess=!!e.is_succ,delete e.is_succ;return t.cardList=t.card_list,delete t.card_list,t}))},e.addDevice=function(e){return X("addDevice",e)},e.checkJsApi=async function(e){return ee(e,(async()=>{await Z();const t=await j("checkJsApi",{jsApiList:P(e.jsApiList)});if("string"==typeof t.checkResult)try{t.checkResult=JSON.parse(t.checkResult)}catch(n){t.checkResult={}}return t.checkResult=function(e){const t={...e};for(const n of Object.keys(e))t[A(n)]=e[n];return t}(Te(t.checkResult)),t}))},e.checkSchedule=function(e){return X("checkSchedule",e)},e.chooseCard=function(e){return ee(e,(async()=>{await Z();const t=await j("chooseCard",{app_id:k(),location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:`${e.timestamp}`,nonce_str:e.nonceStr});return t.cardList=t.choose_card_info,delete t.choose_card_info,t}))},e.chooseImage=function(e={}){return ee(e,(async()=>{await Z();const t=await j("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"],defaultCameraMode:e.defaultCameraMode||"normal",isSaveToAlbum:O(e.isSaveToAlbum)?0:1});if(l&&t.localIds){t.localIds=t.localIds||"[]";try{t.localIds=JSON.parse(t.localIds)}catch(n){}}return t}))},e.chooseInvoice=function(e){return X("chooseInvoice",e)},e.chooseWXPay=function(e){return X("getBrandWCPayRequest",e,Ie(e))},e.claimClassAdmin=function(e={}){return X("claimClassAdmin",e)},e.closeBLEConnection=function(e){return X("closeBLEConnection",e)},e.closeBluetoothAdapter=function(e={}){return X("closeBluetoothAdapter",e)},e.closeWindow=function(e={}){return X("closeWindow",e)},e.connectWifi=function(e){return X("connectWifi",e)},e.consumeAndShareCard=function(e){return X("consumedShareCard",e,{consumedCardId:e.cardId,consumedCode:e.code})},e.createBLEConnection=function(e){return X("createBLEConnection",e)},e.createChatWithMsg=function(e){return X("createChatWithMsg",e)},e.createCorpGroupChat=function(e){return X("createCorpGroupChat",e,{groupName:e.groupName||"",userIds:e.userIds,openUserIds:e.openUserIds,externalUserIds:e.externalUserIds,corpGroupUserIds:e.corpGroupUserIds})},e.createExternalPayment=function(e={}){return X("createExternalPayment",e)},e.createJSAPIPanel=function(e,t){const n=Pe(t.el),{style:r}=n;r.width="100%",r.height="100%";const o=new Map,{dispose:i}=Ee(n,"https://login.work.weixin.qq.com",(n=>{switch(n.type){case"getStaticOptions":return{name:e,options:{...t,el:void 0,params:void 0}};case"getJSAPIParams":return async function(n){const r=R(t.params)?await t.params():t.params,i=E();return o.set(n.seq,r),{webToken:t.webToken,url:i,configParams:n.payload?.skipSignature?void 0:await Ne(i,n.payload?.preferSignatureTypeList||["agentConfig"]),jsapi:e,jsapiParams:r}}(n);case"openModalFrame":return function(e){Re(e.payload.url)}(n);case"jsapiCallback":return function(e){if(!o.has(e.seq))return;const t=o.get(e.seq);o.delete(e.seq),B("success"===e.kind?t?.success:t?.fail,e.payload);B(t?.complete,e.payload)}(n);case"call":return be(n,t)}}));return n.style.opacity="0",n.src="https://login.work.weixin.qq.com/wwopen/ww-jsapi-transparent-frame",{el:n,unmount(){i(),n.parentNode?.removeChild(n)}}},e.createOpenDataFrameFactory=function(e){let n=r();async function r(){if(d)try{return await Ae(),function(e){return new Promise(((n,r)=>{t.WWOpenData.createOpenSessionInjector(e,((e,t)=>{e||!t?r(e||new Error("System error")):n(t)}))}))}({url:lt})}catch(n){throw e?.onError?.(n),n}}async function o(e){if(!d)return;const t=await n;t&&t(e)}return{createOpenDataFrame:function(e){const i=Pe(e.el),a=t.WWOpenData.registerOpenFrame(i);if(!e.template)throw new Error("options.template is required");const{invoke:c,dispose:s}=Ee(i,pt,(t=>{switch(t.type){case"init":return async function(){return await o(i),{id:a,hooks:ht(e),options:{...e,el:void 0,methods:void 0,data:l.data}}}();case"call":return function(t){let n=e;"method"===t.kind&&(n=n.methods);return be(t,n,l)}(t);case"refreshSession":return async function(){n=r(),await o(i)}();case"invokeJsapi":return function(e){return j("wwapp.invokeJsApiByCallInfo",{callInfo:e.callInfo})}(t);case"agentConfig":return async function(){const e=E();return{url:e,params:await H(e)}}();case"modal":return async function(t){const n=d?"wecom-window":void 0;if("function"!=typeof e.handleModal)return{modalType:n};const r=e.handleModal({modalUrl:t.modalUrl});return{modalType:!1===r?"iframe":n}}(t);case"refEvent":return function(e){p(e.refId,e.data)}(t)}})),{get:u,handleEvent:p}=dt(c),l={el:i,data:ut(e.data)||{},getRef:u,setData:async function(e){(function(e,t,n){void 0===n&&(n={});for(var r=n.protectedKeys||it,o=n.set||st,i=0,a=Object.keys(t);i<a.length;i++){var c=a[i];if(!je(r,c))if(je(c,"[")||je(c,"."))try{var s=at(ot(c),r||[]);s?ct(e,s,t[c],o):o(e,c,t[c])}catch(u){o(e,c,t[c])}else o(e,c,t[c])}})(l.data,e,{protectedKeys:ft}),await c({type:"update",options:{data:e}})},dispose:function(){s(),t.WWOpenData.unregisterOpenFrame(a)},...e.methods};return i.src=lt,l}}},e.createSchoolPayment=function(e){return X("createSchoolPayment",e)},e.createScrollViewContext=async function(e,t){const n=await e.getRef(t);if(n)return{scrollTo(e){n.invoke("scrollTo",e)},scrollIntoView(e,t){n.invoke("scrollIntoView",{selector:e,options:t})}}},e.createWWLoginPanel=function(t){const{width:n,height:r}=function(t=e.WWLoginPanelSizeType.middle){const n=vt[t]||vt[e.WWLoginPanelSizeType.middle];return{width:n[0],height:n[1]}}(t.params?.panel_size),o=Pe(t.el),{style:i}=o;i.width=n,i.height=r;const{dispose:a}=Ee(o,"https://login.work.weixin.qq.com",(e=>{if("call"===e.type)return be(e,t);throw new Error(`Unknown message type '${e.type}'`)})),c=new URL("https://login.work.weixin.qq.com/wwlogin/sso/login");for(const e of Object.keys(t.params||{}))c.searchParams.set(e,t.params[e]);return c.searchParams.set("version",gt),o.src=c.href,{el:o,unmount(){a(),o.parentNode?.removeChild(o)}}},e.discoverDevice=function(e){return X("discoverDevice",e)},e.downloadImage=function(e){return X("downloadImage",e,{serverId:e.serverId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.downloadLivingReplay=function(e){return X("downloadLivingReplay",e)},e.downloadVoice=function(e){return X("downloadVoice",e,{serverId:e.serverId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.ensureAgentConfigReady=Q,e.ensureConfigReady=K,e.ensureCorpConfigReady=z,e.enterHWOpenTalk=function(e){return X("enterHWOpenTalk",e)},e.enterpriseVerify=function(e={}){return X("enterpriseVerify",e)},e.env=Wt,e.getApprovalSelectedItems=function(e){return ee(e,(async()=>{await Z();const t=await j("getApprovalSelectedItems",{key:e.key});if(!t.selectedData)return t;try{t.selectedData=JSON.parse(t.selectedData)}catch(n){t.selectedData=[]}return t}))},e.getBLEDeviceCharacteristics=function(e){return X("getBLEDeviceCharacteristics",e)},e.getBLEDeviceServices=function(e){return X("getBLEDeviceServices",e)},e.getBeacons=function(e={}){return X("getBeacons",e)},e.getBluetoothAdapterState=function(e={}){return X("getBluetoothAdapterState",e)},e.getBluetoothDevices=function(e={}){return ee(e,(async()=>{await Z();const e=await j("getBluetoothDevices");for(const t of e.devices||[])t.advertisData=M(t.advertisData),t.serviceData=M(t.serviceData);return e}))},e.getClipboardData=function(e={}){return X("getClipboardData",e)},e.getConnectedBluetoothDevices=function(e){return X("getConnectedBluetoothDevices",e)},e.getConnectedWifi=function(e={}){return X("getConnectedWifi",e)},e.getContext=function(e={}){return X("getContext",e)},e.getCurCorpGroupChat=function(e={}){return X("getCurCorpGroupChat",e)},e.getCurCorpGroupContact=function(e){return X("getCurCorpGroupContact",e)},e.getCurExternalChat=function(e={}){return X("getCurExternalChat",e)},e.getCurExternalContact=function(e={}){return X("getCurExternalContact",e)},e.getLocalImgData=function(e){return X("getLocalImgData",e)},e.getLocation=function(e={}){return ee(e,(async()=>{await Z();const t=await j("geoLocation",{type:e.type||"wgs84"});return delete t.type,t}))},e.getNetworkType=function(e={}){return X("getNetworkType",e)},e.getShareInfo=function(e){return X("getShareInfo",e)},e.getSignature=function(e){let t=e;"string"==typeof e&&(t={ticket:e});const n=t.nonceStr||Math.random().toString(36).slice(2),r=t.timestamp||Math.floor(Date.now()/1e3),o=t.url||i().split("#")[0];return{timestamp:r,nonceStr:n,signature:St(`jsapi_ticket=${t.ticket}&noncestr=${n}&timestamp=${r}&url=${o}`)}},e.getVerifyParams=x,e.getWifiList=function(e={}){return X("getWifiList",e)},e.hideAllNonBaseMenuItem=function(e={}){return X("hideAllNonBaseMenuItem",e)},e.hideChatAttachmentMenu=function(e){return X("hideChatAttachmentMenu",e)},e.hideMenuItems=function(e){return X("hideMenuItems",e)},e.hideOptionMenu=function(e={}){return X("hideOptionMenu",e)},e.initOpenData=Ae,e.invoke=j,e.launchMiniprogram=function(e){return X("launchMiniprogram",e,{appid:e.appid,path:We(e.path),envVersion:e.envVersion})},e.navigateToAddCustomer=function(e={}){return X("navigateToAddCustomer",e)},e.navigateToKfChat=function(e){return X("navigateToKfChat",e)},e.notifyBLECharacteristicValueChange=function(e){return X("notifyBLECharacteristicValueChange",e)},e.on=U,e.onBLECharacteristicValueChange=function(e){U("onBLECharacteristicValueChange",(t=>{t?.value&&(t.value=M(t.value)),e(t)}))},e.onBLEConnectionStateChange=function(e){U("onBLEConnectionStateChange",e)},e.onBeaconServiceChange=function(e){U("onBeaconServiceChange",e)},e.onBeaconUpdate=function(e){U("onBeaconUpdate",e)},e.onBluetoothAdapterStateChange=function(e){U("onBluetoothAdapterStateChange",e)},e.onBluetoothDeviceFound=function(e){U("onBluetoothDeviceFound",e)},e.onGetWifiList=function(e){U("onGetWifiList",e)},e.onHistoryBack=function(e){U("historyBack",e)},e.onLocationChange=function(e){U("auto:location:report",e)},e.onMenuShareAppMessage=function(e){Y("menu:share:appmessage",e,(()=>j("sendAppMessage",{title:e.title||a(),desc:e.desc||"",link:e.link||i(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""})))},e.onMenuShareQQ=function(e){Y("menu:share:qq",e,(()=>j("shareQQ",{title:e.title||a(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||i()})))},e.onMenuShareQZone=function(e){Y("menu:share:QZone",e,(()=>j("shareQZone",{title:e.title||a(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||i()})))},e.onMenuShareTimeline=function(e){Y("menu:share:timeline",e,(()=>j("shareTimeline",{title:e.title||a(),desc:e.title||a(),img_url:e.imgUrl||"",link:e.link||i(),type:e.type||"link",data_url:e.dataUrl||""})))},e.onMenuShareWechat=function(e){Y("menu:share:wechat",e,(()=>j("shareWechat",{title:e.title||a(),desc:e.desc||"",link:e.link||i(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""})))},e.onMenuShareWeibo=function(e){Y("menu:share:weiboApp",e,(()=>j("shareWeiboApp",{title:e.title||a(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||i()})))},e.onNetworkStatusChange=function(e){U("onNetworkStatusChange",e)},e.onSearchBeacons=function(e){U("onBeaconsInRange",e)},e.onUserCaptureScreen=function(e){U("onUserCaptureScreen",e)},e.onVoicePlayEnd=function(e){U("onVoicePlayEnd",e)},e.onVoiceRecordEnd=function(e){U("onVoiceRecordEnd",e)},e.onWifiConnected=function(e){U("onWifiConnected",e)},e.openAddress=function(e={}){return ee(e,(async()=>{await Z();const e=await j("editAddress");return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}))},e.openAppComment=function(e={}){return X("openAppComment",e)},e.openAppDeviceDataAuth=function(e={}){return X("openAppDeviceDataAuth",e)},e.openAppManage=function(e={}){return X("openAppManage",e)},e.openBluetoothAdapter=function(e={}){return X("openBluetoothAdapter",e)},e.openBusinessView=function(e){return ee(e,(async()=>{await Z();const t=await j("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion});if(!l||!t.extraData)return t;try{t.extraData=JSON.parse(t.extraData)}catch(n){t.extraData={}}return t}))},e.openCard=function(e){return X("batchViewCard",e,{card_list:e.cardList.map((e=>({card_id:e.cardId,code:e.code})))})},e.openDefaultBrowser=function(e){return X("openDefaultBrowser",e)},e.openDeviceProfile=function(e){return X("openDeviceProfile",e)},e.openEnterpriseChat=function(e={}){return X("openEnterpriseChat",e,{chatId:e.chatId||"",chatname:e.groupName||"",groupName:e.groupName||"",useridlist:N(e.userIds),userIds:N(e.userIds),openIds:N(e.openIds),externalUserIds:N(e.externalUserIds)})},e.openEnterpriseRedPacket=function(e){return X("getRecevieBizHongBaoRequest",e,Ie(e))},e.openExistedChatWithMsg=function(e){return X("openExistedChatWithMsg",e)},e.openLocation=function(e){return X("openLocation",e,{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""})},e.openProductSpecificView=function(e){return X("openProductViewWithPid",e,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo})},e.openThirdAppServiceChat=function(e={}){return X("openThirdAppServiceChat",e)},e.openUserProfile=function(e){return X("openUserProfile",e)},e.pauseVoice=function(e){return X("pauseVoice",e)},e.playVoice=function(e){return X("playVoice",e)},e.previewFile=function(e){return X("previewFile",e)},e.previewImage=function(e){return X("imagePreview",e)},e.printFile=function(e){return X("printFile",e)},e.queryCurrHWOpenTalk=function(e={}){return X("queryCurrHWOpenTalk",e)},e.readBLECharacteristicValue=function(e){return X("readBLECharacteristicValue",e)},e.refundExternalPayment=function(e){return X("refundExternalPayment",e)},e.register=function(e){!function(e){if(!e.corpId)throw new Error("Missing corpId");y=e}(e),(p||d)&&K()},e.replayLiving=function(e){return X("replayLiving",e)},e.saveApprovalSelectedItems=function(e){return X("saveApprovalSelectedItems",e,{key:e.key,selectedData:"string"==typeof e.selectedData?e.selectedData:JSON.stringify(e.selectedData)})},e.scanQRCode=function(e={}){return ee(e,(async()=>{await Z();const t=await j("scanQRCode",{needResult:e.needResult?1:0,scanType:e.scanType||["qrCode","barCode"]});if(!h)return t;const n=t.resultStr;if(!n)return t;let r;try{r=JSON.parse(n)}catch(o){}return t.resultStr=r?.scan_code?.scan_result,t}))},e.selectCorpGroupContact=function(e){return ee(e,(async()=>{await Z();const t=await j("selectCorpGroupContact",e);if(!V(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t}))},e.selectEnterpriseContact=function(e){return ee(e,(async()=>{await Z();const t=await j("selectEnterpriseContact",e);if(!V(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t}))},e.selectExternalContact=function(e={}){return X("selectExternalContact",e)},e.selectPrivilegedContact=function(e){return X("selectPrivilegedContact",e)},e.sendChatMessage=function(e){return X("sendChatMessage",e)},e.setClipboardData=function(e){return X("setClipboardData",e)},e.setShareAttr=function(e={}){return X("setShareAttr",e)},e.shareAppMessage=function(e){return X("shareAppMessage",e)},e.shareToExternalChat=function(e){return X("shareToExternalChat",e)},e.shareToExternalContact=function(e){return X("shareToExternalContact",e)},e.shareToExternalMoments=function(e){return X("shareToExternalMoments",e)},e.shareWechatMessage=function(e){return X("shareWechatMessage",e)},e.showAllNonBaseMenuItem=function(e={}){return X("showAllNonBaseMenuItem",e)},e.showMenuItems=function(e){return X("showMenuItems",e)},e.showOptionMenu=function(e={}){return X("showOptionMenu",e)},e.showSecurityGatewayConfirmModal=function(e){const t=new URL("https://open.work.weixin.qq.com/wwopen/secureGateway/confirm");if(t.searchParams.set("confirm_id",e.confirmId),h||l)return void(location.href=t.href);t.searchParams.set("modal","true");const n=Re(t.href,(t=>{switch(t.type){case"call":return be(t,e);case"close":return;default:throw new Error(`Unknown message type '${t.type}'`)}}));return{el:n.el,unmount(){n.dispose(),n.el.parentNode?.removeChild(n.el)}}},e.startAutoLBS=function(e){return X("startAutoLBS",e)},e.startBeaconDiscovery=function(e){return X("startBeaconDiscovery",e)},e.startBluetoothDevicesDiscovery=function(e={}){return X("startBluetoothDevicesDiscovery",e)},e.startLiving=function(e={}){return X("startLiving",e)},e.startMeeting=function(e={}){return X("startMeeting",e)},e.startRecord=function(e={}){return X("startRecord",e)},e.startSearchBeacons=function(e={}){return X("startMonitoringBeacons",e)},e.startWecast=function(e={}){return X("startWecast",e)},e.startWifi=function(e={}){return X("startWifi",e)},e.stopAutoLBS=function(e={}){return X("stopAutoLBS",e)},e.stopBeaconDiscovery=function(e={}){return X("stopBeaconDiscovery",e)},e.stopBluetoothDevicesDiscovery=function(e={}){return X("stopBluetoothDevicesDiscovery",e)},e.stopRecord=function(e={}){return X("stopRecord",e)},e.stopSearchBeacons=function(e={}){return X("stopMonitoringBeacons",e)},e.stopVoice=function(e){return X("stopVoice",e)},e.stopWifi=function(e={}){return X("stopWifi",e)},e.thirdPartyOpenPage=function(e){return X("thirdPartyOpenPage",e)},e.translateVoice=function(e){return X("translateVoice",e,{localId:e.localId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.updateAppMessageShareData=function(e={}){return X("updateAppMessageShareData",e)},e.updateCorpGroupChat=function(e){return X("updateCorpGroupChat",e)},e.updateEnterpriseChat=function(e){return X("updateEnterpriseChat",e,{chatId:e.chatId,userIdsToAdd:N(e.userIdsToAdd)})},e.updateMomentsSetting=function(e){return X("updateMomentsSetting",e)},e.updateTimelineShareData=function(e={}){return X("updateTimelineShareData",e)},e.uploadImage=function(e){return X("uploadImage",e,{localId:e.localId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.uploadVoice=function(e){return X("uploadVoice",e,{localId:e.localId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.wedocSelectDoc=function(e={}){return X("wedocSelectDoc",e)},e.wedriveSelectDir=function(e={}){return X("wedriveSelectDir",e)},e.wedriveSelectFileForDownload=function(e){return X("wedriveSelectFileForDownload",e)},e.wedriveSelectFileForShare=function(e){return X("wedriveSelectFileForShare",e)},e.writeBLECharacteristicValue=function(e){return X("writeBLECharacteristicValue",e,{deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:e.characteristicId,value:L(e.value)})},e}({});